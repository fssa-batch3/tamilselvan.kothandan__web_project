<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>medical service </title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
</head>

<body>

    <header class="header">

        <a href="./index.html" class="logo">
            <i class="fa fa-heart" style="font-size:28px;color:#0e6453"></i> Medical
            Service </a>

        <nav class="navbar" id="navbar">

        </nav>

        <div id="menu-btn" class="fas fa-bars"></div>

    </header>

    <form role="form" onsubmit="signUp(event);" style="margin-top: 20rem;">
        <h1>Register</h1>
        <p>Please fill in this form to create an account.</p>
        <hr>

        <label for="name">
            <b>Name</b>
        </label>
        <input type="text" placeholder="Enter Your Name" pattern="[a-zA-Z0-9]+" name="name" id="fullname" required>
        <br>

        <label for="number">
            <b>Contact No.</b>
        </label>
        <input type="tel" pattern="^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$"
            placeholder="Enter Your Contact No." id="Phone_number" name="number" required>
        <br>

        <label for="email">
            <b>Email</b>
        </label>
        <input type="text" placeholder="Enter Your E-mail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" name="email"
            id="email" required>
        <br>

        <label for="pwd">
            <b>Password</b>
        </label>
        <span style="color: #0e6453;"> Note: 1 num, 1 uppercase/lowercase, 8+ char. </span>
        <input type="password" placeholder="Enter Your Password" id="password"
            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" name="psw" required>
        <br>

        <label for="psw-repeat">
            <b>Repeat Password</b>
        </label>
        <input type="password" placeholder="Repeat Your Password" id="confirm_password"
            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" name="psw-repeat" required>
        <br>
        <hr>
        <p>
            By creating an account you agree to our <a href="#">Terms & Privacy</a>.
        </p>

        <button type="submit" class="registerbutton">Register</button>

        <p>
            Already have an account? <a href="./admin_login.html">Login</a>.
        </p>

    </form>

    <script>
const form = document.querySelector("form");

form.addEventListener("submit", (e) => {
  e.preventDefault();

  const full_name = document.getElementById("fullname").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const confirm_password = document.getElementById("confirm_password").value;
  const phone_number = document.getElementById("Phone_number").value.trim();

  // Validate full name
  const nameRegex = /^[A-Za-z][A-Za-z\s]*$/;
  if (!nameRegex.test(full_name)) {
    alert(
      "Invalid full name. Full name must contain only letters and spaces, and start with a letter."
    );
    return;
  }

  // Validate email
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    alert("Invalid email address. Please enter a valid email address.");
    return;
  }

  // Validate password
  const passwordRegex = /^\S*$/;
  if (!passwordRegex.test(password)) {
    alert("Invalid password. Password cannot contain spaces.");
    return;
  }

  // Validate phone number
  const phoneRegex = /^[0-9]{10}$/;
  if (!phoneRegex.test(phone_number)) {
    alert("Invalid phone number. Please enter a valid 10-digit phone number.");
    return;
  }

  // Check if the passwords match
  function checkPassword() {
    const passwordValue = password;
    const confirm_passwordValue = confirm_password;

    if (passwordValue !== confirm_passwordValue) {
      alert("Passwords don't match. Please try again.");
      confirm_password.value = "";
    } else {
      alert("Password matched.");
    }
  }
  checkPassword();

  // Save the user account to local storage
  const admin = JSON.parse(localStorage.getItem("admin")) || [];
  const exist = admin.some((data) => data.full_name.toLowerCase() === full_name.toLowerCase());
  if (!exist) {
    admin.push({ full_name, email, password, phone_number });
    localStorage.setItem("admin", JSON.stringify(admin));
    document.querySelector("form").reset();
    alert("Account created successfully. Please sign in using the link below.");
    window.location.href = "./admin_login.html";
  } else {
    alert("This account already exists. Please sign in using the link below.");
  }
});
</script>

</body>

</html>